<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Inventory ERP{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% if current_user.is_authenticated %}
    <nav class="navbar">
        <div class="nav-brand">Inventory ERP</div>
        <ul class="nav-menu">
            <li><a href="{{ url_for('dashboard.index') }}">Dashboard</a></li>
            <li class="dropdown">
                <a href="#">Items ▼</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('items.index') }}">All Items</a></li>
                    <li><a href="{{ url_for('items.new') }}">New Item</a></li>
                    <li><a href="{{ url_for('items.import_items') }}">Import Items</a></li>
                    <li><a href="{{ url_for('items.categories') }}">Categories</a></li>
                    <li><a href="{{ url_for('items.types') }}">Types</a></li>
                    <li><a href="{{ url_for('items.series') }}">Material Series</a></li>
                    <li><a href="{{ url_for('items.materials') }}">Materials</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#">Inventory ▼</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('inventory.index') }}">Stock Levels</a></li>
                    <li><a href="{{ url_for('inventory.locations') }}">Locations</a></li>
                    <li><a href="{{ url_for('inventory.adjust') }}">Adjust Stock</a></li>
                    <li><a href="{{ url_for('inventory.transfer') }}">Transfer</a></li>
                    <li><a href="{{ url_for('inventory.transactions') }}">Transactions</a></li>
                    <li><a href="{{ url_for('scraps.index') }}">Scrap Records</a></li>
                    <li><a href="{{ url_for('scraps.new') }}">New Scrap</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#">Purchasing ▼</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('purchase_orders.index') }}">Purchase Orders</a></li>
                    <li><a href="{{ url_for('purchase_orders.new') }}">New PO</a></li>
                    <li><a href="{{ url_for('purchase_orders.suppliers') }}">Suppliers</a></li>
                    <li><a href="{{ url_for('receipts.index') }}">Receipts</a></li>
                    <li><a href="{{ url_for('receipts.new') }}">New Receipt</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#">Shipping ▼</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('clients.index') }}">Clients</a></li>
                    <li><a href="{{ url_for('shipments.index') }}">Shipments</a></li>
                    <li><a href="{{ url_for('shipments.new') }}">New Shipment</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#">External Processes ▼</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('external_processes.index') }}">All Processes</a></li>
                    <li><a href="{{ url_for('external_processes.new') }}">New Process</a></li>
                </ul>
            </li>
            <li class="dropdown">
                <a href="#">Reports ▼</a>
                <ul class="dropdown-menu">
                    <li><a href="{{ url_for('reports.inventory_valuation') }}">Inventory Valuation</a></li>
                    <li><a href="{{ url_for('reports.low_stock') }}">Low Stock</a></li>
                    <li><a href="{{ url_for('reports.transaction_history') }}">Transaction History</a></li>
                    <li><a href="{{ url_for('reports.purchase_order_status') }}">PO Status</a></li>
                    <li><a href="{{ url_for('reports.external_process_status') }}">External Process Status</a></li>
                </ul>
            </li>
            <li><a href="{{ url_for('auth.logout') }}">Logout ({{ current_user.username }})</a></li>
        </ul>
    </nav>
    {% endif %}

    <div class="container">
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    {% block scripts %}{% endblock %}
</body>
</html>
