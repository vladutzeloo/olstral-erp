{% extends "base.html" %}

{% block title %}Movement {{ movement.movement_number }} - Inventory ERP{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Stock Movement: {{ movement.movement_number }}</h1>
    <div class="page-actions">
        <a href="{{ url_for('stock_movements.index') }}" class="btn btn-secondary">Back to Movements</a>
    </div>
</div>

<div class="card">
    <h2>Movement Information</h2>
    <table class="info-table">
        <tr>
            <th>Movement Number:</th>
            <td>{{ movement.movement_number }}</td>
            <th>Status:</th>
            <td>
                <span class="badge badge-{{ 'success' if movement.status == 'completed' else 'warning' }}">
                    {{ movement.status|upper }}
                </span>
            </td>
        </tr>
        <tr>
            <th>Movement Type:</th>
            <td>{{ movement.movement_type|title }}</td>
            <th>Date/Time:</th>
            <td>{{ movement.moved_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        </tr>
        <tr>
            <th>Moved By:</th>
            <td>{{ movement.user.username if movement.user else 'System' }}</td>
            <th>Created:</th>
            <td>{{ movement.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
        </tr>
        {% if movement.reason %}
        <tr>
            <th>Reason:</th>
            <td colspan="3">{{ movement.reason }}</td>
        </tr>
        {% endif %}
        {% if movement.notes %}
        <tr>
            <th>Notes:</th>
            <td colspan="3">{{ movement.notes }}</td>
        </tr>
        {% endif %}
    </table>
</div>

<div class="card">
    <h2>Item Details</h2>
    <table class="info-table">
        <tr>
            <th>SKU:</th>
            <td><strong>{{ movement.item.sku }}</strong></td>
            <th>Item Name:</th>
            <td>{{ movement.item.name }}</td>
        </tr>
        <tr>
            <th>Category:</th>
            <td>{{ movement.item.category.name }}</td>
            <th>Type:</th>
            <td>{{ movement.item.item_type.name }}</td>
        </tr>
        <tr>
            <th>Quantity Moved:</th>
            <td colspan="3"><strong class="highlight">{{ movement.quantity }} {{ movement.item.unit_of_measure }}</strong></td>
        </tr>
    </table>
</div>

<div class="form-row">
    <div class="card" style="flex: 1;">
        <h2>From Location</h2>
        <table class="info-table">
            <tr>
                <th>Location Code:</th>
                <td><strong>{{ movement.from_location.code }}</strong></td>
            </tr>
            <tr>
                <th>Name:</th>
                <td>{{ movement.from_location.name }}</td>
            </tr>
            <tr>
                <th>Type:</th>
                <td><span class="badge badge-info">{{ movement.from_location.type|upper }}</span></td>
            </tr>
            {% if movement.from_location.zone %}
            <tr>
                <th>Zone:</th>
                <td><span class="badge badge-secondary">{{ movement.from_location.zone }}</span></td>
            </tr>
            {% endif %}
            {% if movement.from_location.address %}
            <tr>
                <th>Address:</th>
                <td>{{ movement.from_location.address }}</td>
            </tr>
            {% endif %}
        </table>
    </div>

    <div class="card" style="flex: 1;">
        <h2>To Location</h2>
        <table class="info-table">
            <tr>
                <th>Location Code:</th>
                <td><strong>{{ movement.to_location.code }}</strong></td>
            </tr>
            <tr>
                <th>Name:</th>
                <td>{{ movement.to_location.name }}</td>
            </tr>
            <tr>
                <th>Type:</th>
                <td><span class="badge badge-info">{{ movement.to_location.type|upper }}</span></td>
            </tr>
            {% if movement.to_location.zone %}
            <tr>
                <th>Zone:</th>
                <td><span class="badge badge-secondary">{{ movement.to_location.zone }}</span></td>
            </tr>
            {% endif %}
            {% if movement.to_location.address %}
            <tr>
                <th>Address:</th>
                <td>{{ movement.to_location.address }}</td>
            </tr>
            {% endif %}
        </table>
    </div>
</div>

<style>
.highlight {
    font-size: 1.2em;
    color: #2c3e50;
}
.form-row {
    display: flex;
    gap: 20px;
}
.form-row .card {
    margin-top: 0;
}
</style>
{% endblock %}
